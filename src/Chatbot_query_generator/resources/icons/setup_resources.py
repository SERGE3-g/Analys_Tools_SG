import os
import base64
from pathlib import Path
import logging

# Configurazione logging
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

# Icone di base in base64
ICONS = {
    'send': 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=',
    'save': 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKsSURBVEiJrZZNiBxVFIW/c+t1T3dP90wySUz8QTAKihKMiBBEXAT8WbhwI4oLBVEURRAXulLcCO5cuBEEQRAXgqAIKoqKf4gYDFGDGhQTnSSd6Xnd1V3VVfXuceF0Z5JJT08mcG4V771T53733XPvLapKKWV9+osK3P3UO7PWxe0qsrjR+1YQRQUBAVFBEAHx+PFwRYGvP3j82cHKxf1L0ixr2NBYbTSx1h7J8wytDmmakiQJ3nvW1jrkeY5zjtFwRJqmJGlClmXYMKDZbNJoNJg2YxxvHHOJ9Iui4OSdd3yzb999P1tryfOc5eVl9jbm2Nho8+svv7O0tESv1+Pjjz7h7UcfZ2VlhTiO6XQ6dLtdkiTh/PnzHD58D845Xn31Nd5/7z3mq1W+P/cDzz//HM1mkywb8/JLL3L27FlEhHa7TSVyLC4ucv87b1MJBXVgjSFwFowgIjx46iRP3H8/t956jE8//YwgCAiCgGeefpqTJxY4dvw4SZLQ7XY5c+YM1Wq1nGAymaAiGLG+4/FEzmGMoVKpUKvVaDQa1Go1wjCkWq1SKDSbTZxzWwkQEUSEvHBYazHG4JwjiiKstTjnMMbgnENEKIqCOI7LJzDGICKICNZawqD0Y60lCAKstcuAiFAURWkC5xyTfIz3nqIoKLwS2dJ1YwyFV/I8R1WZTCYl4z2qiqoSBAGj0Yher0ee56gq4/GYwWCAqtLv9xkOhwRBsJ3AGINzjuFwyGAwoNfr0e/3GQwGDIdD0jRFVRkMBgwGA0SEMAzLEzjnCMOQfr/P+vo6vV6PTqdDt9ul1+sxGo1QVTqdDv1+H2MMzrnyEwEEQYD3niiKWFhYwBhDEAQsLCwQRRHee+I4Zn5+HmstqoqqUqmUey8qeO/x3m+1quqWrapbFOXXdH/h/gH+F/zHAlVdB34Efr7m2l+/AX+rarbzXFX/Bn4CfgU2/h1Q1Rz4/b/m/wDwkE1HfKqS3gAAAABJRU5ErkJggg==',
    'load': 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKsSURBVEiJrZZNiBxVFIW/c+t1T3dP90wySUz8QTAKihKMiBBEXAT8WbhwI4oLBVEURRAXulLcCO5cuBEEQRAXgqAIKoqKf4gYDFGDGhQTnSSd6Xnd1V3VVfXuceF0Z5JJT08mcG4V771T53733XPvLapKKWV9+osK3P3UO7PWxe0qsrjR+1YQRQUBAVFBEAHx+PFwRYGvP3j82cHKxf1L0ixr2NBYbTSx1h7J8wytDmmakiQJ3nvW1jrkeY5zjtFwRJqmJGlClmXYMKDZbNJoNJg2YxxvHHOJ9Iui4OSdd3yzb999P1tryfOc5eVl9jbm2Nho8+svv7O0tESv1+Pjjz7h7UcfZ2VlhTiO6XQ6dLtdkiTh/PnzHD58D845Xn31Nd5/7z3mq1W+P/cDzz//HM1mkywb8/JLL3L27FlEhHa7TSVyLC4ucv87b1MJBXVgjSFwFowgIjx46iRP3H8/t956jE8//YwgCAiCgGeefpqTJxY4dvw4SZLQ7XY5c+YM1Wq1nGAymaAiGLG+4/FEzmGMoVKpUKvVaDQa1Go1wjCkWq1SKDSbTZxzWwkQEUSEvHBYazHG4JwjiiKstTjnMMbgnENEKIqCOI7LJzDGICKICNZawqD0Y60lCAKstcuAiFAURWkC5xyTfIz3nqIoKLwS2dJ1YwyFV/I8R1WZTCYl4z2qiqoSBAGj0Yher0ee56gq4/GYwWCAqtLv9xkOhwRBsJ3AGINzjuFwyGAwoNfr0e/3GQwGDIdD0jRFVRkMBgwGA0SEMAzLEzjnCMOQfr/P+vo6vV6PTqdDt9ul1+sxGo1QVTqdDv1+H2MMzrnyEwEEQYD3niiKWFhYwBhDEAQsLCwQRRHee+I4Zn5+HmstqoqqUqmUey8qeO/x3m+1quqWrapbFOXXdH/h/gH+F/zHAlVdB34Efr7m2l+/AX+rarbzXFX/Bn4CfgU2/h1Q1Rz4/b/m/wDwkE1HfKqS3gAAAABJRU5ErkJggg==',
    'clear': 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKsSURBVEiJrZZNiBxVFIW/c+t1T3dP90wySUz8QTAKihKMiBBEXAT8WbhwI4oLBVEURRAXulLcCO5cuBEEQRAXgqAIKoqKf4gYDFGDGhQTnSSd6Xnd1V3VVfXuceF0Z5JJT08mcG4V771T53733XPvLapKKWV9+osK3P3UO7PWxe0qsrjR+1YQRQUBAVFBEAHx+PFwRYGvP3j82cHKxf1L0ixr2NBYbTSx1h7J8wytDmmakiQJ3nvW1jrkeY5zjtFwRJqmJGlClmXYMKDZbNJoNJg2YxxvHHOJ9Iui4OSdd3yzb999P1tryfOc5eVl9jbm2Nho8+svv7O0tESv1+Pjjz7h7UcfZ2VlhTiO6XQ6dLtdkiTh/PnzHD58D845Xn31Nd5/7z3mq1W+P/cDzz//HM1mkywb8/JLL3L27FlEhHa7TSVyLC4ucv87b1MJBXVgjSFwFowgIjx46iRP3H8/t956jE8//YwgCAiCgGeefpqTJxY4dvw4SZLQ7XY5c+YM1Wq1nGAymaAiGLG+4/FEzmGMoVKpUKvVaDQa1Go1wjCkWq1SKDSbTZxzWwkQEUSEvHBYazHG4JwjiiKstTjnMMbgnENEKIqCOI7LJzDGICKICNZawqD0Y60lCAKstcuAiFAURWkC5xyTfIz3nqIoKLwS2dJ1YwyFV/I8R1WZTCYl4z2qiqoSBAGj0Yher0ee56gq4/GYwWCAqtLv9xkOhwRBsJ3AGINzjuFwyGAwoNfr0e/3GQwGDIdD0jRFVRkMBgwGA0SEMAzLEzjnCMOQfr/P+vo6vV6PTqdDt9ul1+sxGo1QVTqdDv1+H2MMzrnyEwEEQYD3niiKWFhYwBhDEAQsLCwQRRHee+I4Zn5+HmstqoqqUqmUey8qeO/x3m+1quqWrapbFOXXdH/h/gH+F/zHAlVdB34Efr7m2l+/AX+rarbzXFX/Bn4CfgU2/h1Q1Rz4/b/m/wDwkE1HfKqS3gAAAABJRU5ErkJggg=='
}